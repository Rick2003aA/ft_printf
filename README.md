# ft_printf

42 Tokyo の課題として標準関数 `printf` を再実装したプロジェクトです。  
フォーマット文字の解析、可変長引数の処理、文字列操作、数値変換などを行いました。

---

## 📌 プロジェクト概要
`ft_printf` は、標準関数 `printf` の主要フォーマット指定子をサポートする関数です。

### **対応するフォーマット文字**
- `%c`：文字
- `%s`：文字列
- `%p`：ポインタ
- `%d` / `%i`：整数（signed）
- `%u`：整数（unsigned）
- `%x` / `%X`：16進数（小文字 / 大文字）
- `%%`：パーセント記号

### **要求仕様**
- 標準出力への正しい出力  
- 可変長引数（`va_list`）の理解  
- 返り値として出力文字数を返却  
- メモリリークなし  
- 標準ライブラリ `printf` は使用禁止

---

## 🧱 技術スタック
- **C 言語**
- **可変長引数（va_list, va_start, va_arg, va_end）**
- **再帰を用いた数値 → 文字列変換**
- **ポインタと文字列操作**
- **Makefile によるビルド管理**

---

## 🧩 実装した主要コンポーネント

### ✔ 1. フォーマット解析パーサ
`%` を検出し、その次の文字に応じて処理を分岐。

例：
```
printf("Hello %s", name);
```
→ `s` と判断して文字列処理関数へ。

---

### ✔ 2. 文字列および数値出力
#### 文字列
- NULL なら `(null)` を出力する仕様を再現

#### 整数
- `int` → `ft_putnbr`  
- マイナス値は `-` を先に出力し、絶対値へ変換  
- `INT_MIN`（-2147483648）も安全に処理

#### Unsigned / Hex
- 再帰を使い基数変換  
- 大文字・小文字をフォーマットで分岐

---

### ✔ 3. ポインタ出力 `%p`
`0x` + 16進数表記  
NULL の場合は `0x0`。

---

### ✔ 4. 戻り値として出力文字数をカウント
すべての出力処理で **書き込んだ文字数を加算** → 最終的に返却。

---

## 🧠 学んだこと

### ✔ 可変長引数のしくみ
`va_list` の内部構造を理解。  

### ✔ 10進 → 16進の変換と再帰の実践
`ft_putnbr_base` の再帰実装で、基数変換の挙動を完全理解。

### ✔ フォーマット解析の基礎
- 分岐処理  
- エラーケース例外処理  

### ✔ NULL や境界値の扱い
- `(null)`  
- `INT_MIN`  
- `ULONG_MAX`  
- `0x0`  
- 空文字
  
---

## 🔍 苦労した点 & デバッグ

### ● INT_MIN / LONG_MIN の扱い
`2147483648` は `int` の正の範囲外 →  
**符号付き処理は long で扱う**ことで解決。

### ● 戻り値のカウント漏れ
再帰内部で return する際に  
**出力文字数を必ず積み上げる必要がある**。→written変数をputcharのみで管理することにより、戻り値を簡単に管理することができた

### ● 予期しない使い方をされた際の挙動の再現
- printfの失敗と同様、write関数の失敗で-1を返す処理
- 無効指定子の扱い
- %%%が入力された際に、最後の%は出力しない　など
